---
created: 2023-11-15T20:55
updated: 2023-11-15T20:55
---
# 计算机网络: IP地址，子网掩码，网段表示法，默认网关，DNS服务器详解

## IP地址网段表示法

### 172.12.34.0/25

### 子网掩码：用于表示IP地址中的多少位用来做主机号。因为"其中值为1的比特留给网络号和子网号，为0的比特留给主机号"（TCP/IP V1）。

### 172.12.34.0/25含义：

### 172.12.34.0——表示一个子网号

### 25——表示采用子网掩码的二进制中的前25位为有效位，即用 32-25=7big 来表示主机号，该子网可以容纳 2^7-2=126台主机。

### 因此172.12.34.0/25 表示IP范围为 172.12.34.1～172.12.34.126

### [地址](https://www.cnblogs.com/amyzhu/p/11396136.html)

## 什么是网关？

### 可以联想下海关？什么是海关？）

### 连接两个不同的网络的设备都可以叫网关设备；网关的作用就是实现两个网络之间进行通讯与控制。

### 网关设备可以是 交互机（三层及以上才能跨网络）、路由器、启用了路由协议的服务器、代理服务器、防火墙等

### 网关地址就是网关设备的IP地址。

### 假设我们有两个网络：

- 网络A的IP地址范围为“192.168.1.1~192.168.1.254”，子网掩码为255.255.255.0
- 网络B的IP地址范围为“192.168.2.1~192.168.2.254”，子网掩码为255.255.255.0
- 要实现这两个网络之间的通信，则必须通过网关。
- 如果网络A中的主机发现数据包的目的主机不在本地网络中，就把数据包转发给它自己的网关，再由网关转发给网络B的网关，网络B的网关再转发给网络B的某个主机（如附图所示）。网络A向网络B转发数据包的过程。
- 只有设置好网关的IP地址，TCP/IP协议才能实现不同网络之间的相互通信。

### 默认网关 

- 一台主机可以有多个网关。默认网关的意思是一台主机如果找不到可用的网关，就把数据包发给默认指定的网关，由这个网关来处理数据包。现在主机使用的网关，一般指的是默认网关。

### 扩展：自动设置默认网关

- 自动设置就是利用DHCP（Dynamic Host Configuration Protocol, 动态主机配置协议）服务器来自动给网络中的计算机分配IP地址、子网掩码和默认网关 。
- 一旦网络的默认网关发生了变化时，只要更改了DHCP服务器中默认网关的设置，那么网络中所有的计算机均获得了新的默认网关的IP地址。这种方法适用于网络规模较大、TCP/IP参数有可能变动的网络。
- 另外一种自动获得网关的办法是通过安装代理服务器软件（如MS Proxy）的客户端程序来自动获得，其原理和方法和DHCP有相似之处。

### 扩展说明

- 问：在网上看到一些人提问：连接到相同（二层）交换机或集线器上的计算机，如果设置不同的网络地址，为什么不能通信。
- 答：

	- 在 TCP/IP 协议中，网络层（通过IP地址识别通信方）封包完成交给下一层数据链路层（通过MAC地址识别通信方）时，需要通过 ARP 广播 获取目标 IP 对应的 MAC 地址。
	- 但因为 ARP 报文只能在相同网络地址内广播，如果目标计算机与源计算机处于不同网络，则无法进行响应，因此源计算机无法完成链路层数据的封装。
	- [ARP 协议相关信息可见 这里。](https://baike.baidu.com/item/ARP/609343)

## DNS服务器

### [参考：《DNS原理及其解析过程》](https://blog.51cto.com/369369/812889)

### 　　域名与DNS

### 我们访问一个网站的时候，往往使用的是域名（相对IP来说更加语义清晰、更加容易记忆，例如 www.baidu.com)。

### 域名是由一串用点分隔的名字组成的，通常包含组织名，而且始终包括两到三个字母的后缀，以指明组织的类型或该域所在的国家或地区。

### 然而计算机之间的通信网络通信是通过IP进行的， 因此需要将域名解析为对应的IP，DNS就是进行域名解析的服务器。

### DNS 维护着 域名(domain name)和IP地址 (IP address)的对照表表，以解析消息的域名。

### DNS 查询的过程如下图所示

### DNS 维护着 域名(domain name)和IP地址 (IP address)的对照表表，以解析消息的域名。

- 1、在浏览器中输入www.qq.com域名，操作系统会先检查自己本地的hosts文件是否有这个网址映射关系，如果有，就先调用这个IP地址映射，完成域名解析。 
- 2、如果hosts里没有这个域名的映射，则查找本地DNS解析器缓存，是否有这个网址映射关系，如果有，直接返回，完成域名解析。
- 3、如果hosts与本地DNS解析器缓存都没有相应的网址映射关系，首先会找TCP/ip参数中设置的首选DNS服务器，在此我们叫它本地DNS服务器，此服务器收到查询时，如果要查询的域名，包含在本地配置区域资源中，则返回解析结果给客户机，完成域名解析，此解析具有权威性。 
- 4、如果要查询的域名，不由本地DNS服务器区域解析，但该服务器已缓存了此网址映射关系，则调用这个IP地址映射，完成域名解析，此解析不具有权威性。 
- 5、如果本地DNS服务器本地区域文件与缓存解析都失效，则根据本地DNS服务器的设置（是否设置转发器）进行查询，如果未用转发模式，本地DNS就把请求发至13台根DNS，根DNS服务器收到请求后会判断这个域名(.com)是谁来授权管理，并会返回一个负责该顶级域名服务器的一个IP。本地DNS服务器收到IP信息后，将会联系负责.com域的这台服务器。这台负责.com域的服务器收到请求后，如果自己无法解析，它就会找一个管理.com域的下一级DNS服务器地址(qq.com)给本地DNS服务器。当本地DNS服务器收到这个地址后，就会找qq.com域服务器，重复上面的动作，进行查询，直至找到www.qq.com主机。 
- 6、如果用的是转发模式，此DNS服务器就会把请求转发至上一级DNS服务器，由上一级服务器进行解析，上一级服务器如果不能解析，或找根DNS或把转请求转至上上级，以此循环。不管是本地DNS服务器用是是转发，还是根提示，最后都是把结果返回给本地DNS服务器，由此DNS服务器再返回给客户机。

## IP地址分类（A/B/C/D/E/F类）

### [地址](http://www.t086.com/article/5090)

