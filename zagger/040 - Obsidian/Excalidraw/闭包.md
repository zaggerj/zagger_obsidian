---
created: 2023-11-15T20:53
updated: 2023-11-15T20:53
---
# 闭包

## 概念

### 闭包：函数嵌套函数，内部函数就是闭包

### 闭包，通俗的讲就是可以在外部访问局部变量，通过函数可以根据链式作用域原则取到外层局部作用域的原理，将外层局部作用域的变量通过return返回出去，这样就可以在局部作用域外部使用局部作用域内部的变量了.

### 优点

- 可以在外部使用局部作用域的变量.

### 缺点

- 使局部作用域变量不能被内存释放，变量就会占用内存，内存消耗大，可能会导致内存泄露.

### 闭包的使用方法

- 简单来讲就是在局部作用域内通过函数将需要的局部作用域变量通过return返回出去，代码如下：

	- 我们通过闭包的方式，在全局环境下拿到了{}内部局部作用域的games，这便是闭包
	- 通过函数方式

## 代码

### // 闭包：函数嵌套函数，内部函数就是闭包
function outerFun() {
    let a = 10
    function innerFun() {
        console.log(a)
    }
    return innerFun
}

let fun = outerFun()
fun();

## 作用域链

### 图示

- 一直向上找

### 代码

- 
let a = 10
let b = 20
function fun() {
    let a = 30
    let c = 40
    function fn() {
        let a = 50
        let b = 60
    }
}


## 特点

### 正常情况下，函数调用完成之后，函数中的局部变量中的会释放（内存中）

### 闭包，内部函数没有执行完成，外部函数变量不会被销毁

### 应用：封装一段代码

- let module = (function () {
    let a = 10
    let b = 20
    function add() {
        return a + b
    }
    function sub() {
        return a - b
    }
    let result1 = add()
    let result2 = sub()
    console.log(result1, result2)
    return {
        add,
        sub,
    }
})()

let result1 = module.add()
let result2 = module.sub()
console.log(result1, result2)

