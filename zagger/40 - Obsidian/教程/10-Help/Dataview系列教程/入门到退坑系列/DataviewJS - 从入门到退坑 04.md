---
source: "https://publish.obsidian.md/napkinium/Ideas/Dataview/Learnings/Dataview+Learnings"
---
````chat
left: 😯
right: 🤣
titleMode: all
< 筛选讲过了，能不能讲讲排序。  
> 讲讲。跟筛选不同，排序这其实还是个讲究活儿。

< 哦？咋个讲究法？  
> 你记得筛选的基本语法吧？  
< `.filter(p => 生成布尔值的跟p有关的表达式)`这样子？  
> 对，你看，它只要一个参数。  
< 我觉得这一个就够麻烦的了，那排序要几个？  
> 三个。  
< ？？？？  
> 我给你看一下语法。

```
.sort(
keyFunction,
'asc',  // 'desc' for reversed order
comparatorFunction
)
```

其中keyFunction和comparatorFunction都是函数，前者拿一个参数，返回一个可比较值，后者拿两个参数，返回一个整数。

< 我再重复一下我刚才的——？？？？？  
> 哈哈哈，我来举个栗子说明吧。  
< 好。  
> 🌰

```
dv.paragraph(
  dv.pages('"Test"').sort(
    p => p.file.name,
'desc',
(a, b) => a.localeCompare(b, 'zh-CN')
  ).file.name
)
```
< 看不明白。  
> 一步一步来。首先，第一个参数是`p => p.file.name`。这个你其实能看懂了吧？  
< 唔，这是个上期说过的箭头函数，作用是给一个p，就会返回p的文件名来着？  
> 正确。在排序里面，我们说这个`p.file.name`就是排序用的键。简单说，“就是凭这个来排序”。  
< 为啥需要这么个东西呢？  
> 不说明键的话，一个文件有很多相关数据，你应该怎么排序呢？名字？字数？标题字数？  
< 哦，所以这个指明了用文件名排序。那……不就完事儿了么？  
> 这就轮到后面的参数了。第二个参数其实很简单：`'asc'`决定是升序，`'desc'`则是降序。  
< 哦哦哦，所以需要反过来排序的时候就把这个改一下就好。  
> 对的，默认是`'asc'`。

< 那第三个呢，这个看起来最麻烦。  
> 问你一个问题，文件名可以怎么排序？  
< ……就一种啊？你看，我在系统浏览器里排序文件，从来都只有顺序倒序的问题，那还能怎么排序？  
> 那给你三个文件名字，`test.md`，`天气.md`和`食谱.md`，你会怎么排序？  
< ……呃，食谱，天气，test？  
> 我来猜一猜，你是不是先按中文拼音顺序，然后是英文字母顺序？  
< 对的。  
> 你觉得在一个英文系统里，系统会怎么给中文排序？  
< ……！所以之前我的文件排序那么乱的吗？  
> 是的，所以在上面的🌰里面，`(a, b) => a.localeCompare(b, 'zh-CN')`这个箭头函数的作用就是，“_给定两个排序对象a和b，用两者间在中文语境下的排序规则来排序_”。而所谓的中文语境下的排序规则，就是拼音顺序啦。

< 所以这个🌰合在一起，就是……以拼音顺序，升序排列文件名？  
> 对的。

< 好麻烦啊。还有那个`localeCompare`怎么来的？  
> 那就是javascript的标准库的问题啦，我这里不负责解答哦。不过通常来说，对于单纯的数字的值或者是时间这类的值，你都可以不用给出专门的比对函数，只要指定排序键和排序方向就好。  
< 唔。所以按修改时间排序，从近到远就是……`.sort(p => p.file.mtime, 'desc'`……呃，我第三个怎么写……  
> 可以不写。  
< 不写的话是什么规则？  
> 不写就会用默认的大于小于号对比，而时间和数值一般都会实现这种基础的对比方式，所以不需要你担心。  
< 所以就是`.sort(p => p.file.mtime, 'desc')`，完事？  
> 对。

< 好像明白了。虽然还是不太会第三个参数的写法的感觉……  
> 那么给你出几个题。  
< ……  
> 1.给定任意文件夹，将里面的文件按照修改日期排序，升降序随意，显示修改日期。2.给定任意文件夹，将里面的文件按照文件名长度排序，升降序随意，显示文件名。3.给定任意文件夹，将里面的文件按照“创造日期与2021-08-15相差日数的绝对值”排序，升降序随意，显示修改日期。

< 第三个这是什么鬼啊喂！！！  
> 不会的函数什么的请自行百度/谷歌。我溜了先。

````