---
source: "https://publish.obsidian.md/napkinium/Ideas/Dataview/Learnings/Dataview+Learnings"
---
````dialogue
left: 😯
right: 🤣
titleMode: all

< 你再不给我点好康的我就真的退坑了。  
> 唔。既然显示已经能做到了，那就来看看筛选吧。

< 好耶，我为了做表格，已经把我的文件里面放进了各种各样的yaml frontmatter，终于可以用到了耶！不会的兄弟们可以去看[这里](https://blacksmithgu.github.io/obsidian-dataview/data-annotation/)，不过简单地说就是，在frontmatter里像是这样
```
属性: 内容
属性2:
- 内容2.1
- 内容2.2
```
或者在正文里像是这样
```
属性:: 内容
```

就阔以！
> 预习得不错，其实之前就可以用到了。

< ？可以吗？我试着在frontmatter里写了`趣味性: 4`，可是跑的时候结果只是输出了个减号而已。我以为你还没讲完呢。

```
dv.paragraph(dv.current().file.趣味性);
```

> 啊……因为frontmatter里面的内容算是文档的属性，而不是元数据。访问这类你自己定义的内容的时候，不需要`.file`。哦，特例是`.file.tags`，因为虽然可以在frontmatt里面写，但是标签属于元数据。dv.paragraph(dv.current().趣味性);

< ……  
> 总之，你自己写的东西，除了tags，都不需要`.file`。文件自身的那些，需要。

< 行吧。你说要看筛选来着。  
> DV和DVJS的筛选，复杂度不同。在DV里面，基本上就只有通过给定的部分函数逻辑，用布尔运算符迭加起来。而DVJS因为是JS，所以是图灵完备的，所以——  
< 图灵完备？  
> ——就很厉害就是了。  
< 哦🙄

> 不过要讲筛选之前，要先提一嘴[Data Array](https://blacksmithgu.github.io/obsidian-dataview/api/data-array/)。简单地说，`dv.pages`返回的并不是对JS有一定了解的同学们可能会以为的array，而是dv专有的一种数据结构。  
< 不明觉厉。  
> 这个东东呢，我们也不会全讲，只是说一下常用的一些用法。  
首先，这个东西名字里就带着Array的字样，所以它所包含的数据，一般都是对应了复数页面的数据。`dv.pages("").file.name`虽然看后面的`file.name`可能会以为是单数，但是实际上返回的是_库里面所有文件的文件名的清单_。`dv.pages("").趣味性`，则是_库里面所有文件的趣味性的清单_。  
< 嗯你上面提到过了，自定义属性不用加那个`.file`。  
> 现在这么记住就够了。然后，这个东西虽然不是JS的Array，但是确实有一些常用的类似Array的函数，而筛选就是其一。这里可以配合[Snippets](https://publish.obsidian.md/napkinium/Ideas/Dataview/Learnings/Snippets)来看一下。

首先，筛选的语法是这样的：

< 你的snippet里面的filter可不是这么写的。  
> 因为严格来说，filter所需要的参数是任意的一个需要一个参数并输出一个布尔值的函数。  
< 等等，有点绕。filter所需要的参数……是一个函数，而这个函数本身是需要一个参数，输出一个布尔值？布尔值是啥？  
> 对的。布尔值就是“是”或者“不是”。你在写不等式的时候就是在产生这个。这个过程的意义就在于，筛选函数不试图自己决定留下哪些文件，筛掉哪些文件，而是一个一个文件拿给你问“按照你的标准，这个该不该留下来”，而你给他的参数函数就是充当这个“标准”的。  
< 那为什么你的snippet里面的这个都是像是`p => { p.file.name != xxx}`这个样子的？  
> 这个是js里面的箭头函数，你可以理解成“懒得起名的简单函数”。  
< 哦这就是函数啦？  
> 是的。`p => p.file.name != dv.current().file.name` 里面，最开始的`p`的意思是，“你给我审查的文件，我接下来就叫它p”。`p =>`就是箭头函数的名称出处。然后后面的值就是判定的基准：“_你交给我的文件的文件名，和我现在打开的这个文件的文件名不能相同。_”  
< 哦，这个是用来筛去自身的。那如果我想筛掉某个文件夹呢？  
> `p => !p.file.path.startsWith("某某路径")`  
< `startsWith`……根据我的初中英语是……“开头是”的意思……你这个是说，如果文件的路径开头_不是_某某路径的，就不保留？  
> 正确！  
< 那，如果我的文件夹名字是“食谱”，那是不是这里只写“食”也可以？  
> 对的，同样的，“食物”，“食品”也都会被筛掉。  
< 那如果……  
> 再复杂的逻辑就不是DVJS的问题了，而是基本的JS的字符串处理问题了，这个就请移步[专门的教程](https://www.bilibili.com/video/BV1YW411T7GX?p=7)。顺带一提，我自己也搞错过的一点是，箭头函数里，箭头后面如果直接就是返回值的话，不需要`{}`；如果加了`{}`，则必须也有`return`来明确返回值。

````